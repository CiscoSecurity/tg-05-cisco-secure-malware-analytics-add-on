import cx from 'classnames'
import { useDispatch } from 'react-redux'
import { useEffect, useState } from 'react'

import {
  CONFIGURATION_DESCRIPTION,
  CONFIGURATION_TABS,
  PROXY_TAB_INDEX
} from './constants'

import styles from './Configuration.module.scss'
import { fetchLogging, fetchProxy } from './ConfigurationSlice'

const Configuration = () => {
  const dispatch = useDispatch()
  const [selectedTab, setSelectedTab] = useState(PROXY_TAB_INDEX)

  useEffect(() => {
    dispatch(fetchProxy())
    dispatch(fetchLogging())
  }, [])

  return (
    <div className={styles.pageContainer}>
      <div className={styles.descriptionContainer}>
        {CONFIGURATION_DESCRIPTION}
      </div>
      <div className={styles.tabsContainer}>
        {CONFIGURATION_TABS.map(({ index, title }) => (
          <div
            tabIndex={index}
            className={cx(
              styles.tabCard,
              "btn-card",
              selectedTab === index && 'btn-card--selected'
            )}
            onClick={() => setSelectedTab(index)}
          >
            <div
              className={cx(
                styles.tabTitle,
                "btn-card__title",
                selectedTab === index && styles['tabTitle--selected']
              )}
            >
              {title}
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}

export default Configuration
