import { useEffect } from 'react'
import { useDispatch, useSelector } from 'react-redux'

import PageLevel from './PageLevel'
import { clearPageLevel, deQueuePageLevel } from './PageLevelSlice'

export const PageLevelContainer = () => {
  const dispatch = useDispatch()
  const pageLevelQueue = useSelector(state => state.pageLevel.pageLevelQueue)

  useEffect(() => {
    dispatch(clearPageLevel())
  }, []) // eslint-disable-line

  return (
    <>
      {pageLevelQueue.map((notification, index) => (
        <PageLevel
          key={index}
          message={notification.message}
          type={notification.type}
          onClose={(props) => dispatch(deQueuePageLevel(props))}
          index={index}
        />
      ))}
    </>
  )
}

export default PageLevelContainer
